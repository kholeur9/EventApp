{% extends "event.html" %}

{% block content %}
<style>
  .form-control {
    border: 1px solid #ced4da;
    border-radius: .25rem;
    font-size: 1rem;
  }
  place-holder {
    color: #ced4da;
  }
  .loader {
  margin: 10px 0;
  width: 35px;
  height: 35px;
  border: 4px solid #FF0000;
  border-bottom-color: transparent;
  border-radius: 50%;
  display: none;
  box-sizing: border-box;
  animation: rotation 1s linear infinite;
  }

  @keyframes rotation {
  0% {
      transform: rotate(0deg);
     }
  100% {
      transform: rotate(360deg);
     }
  }
</style>
{% include 'header.html' %}
<main class="px-[30px] py-2.5">
  <!--<section class="h-[50px]">
    <div class="w-full p-2.5">
      <p class="text-[13px] text-center text-[#343A40] font-[500]">Vous êtes déjà sur Event ?
        <span>
          <a href="" class="text-[#343A40] font-[700] ml-2.5 text-[14px] underline">
            se connecter
          </a>
        </span>
      </p>
    </div>
  </section>-->
  <section>
    <div class="w-full text-[#343A40]">
      <div class="mt-[40px] mb-[40px]">
        <span class="text-[30px] font-[900]">Terminons.
        </span>
        <h1 class="text-[30px] font-[900]">Votre organisation.
        </h1>
      </div>

      <div class="flex flex-row items-center">
        <span class="text-[13px] font-[500]">Etape 3 :
        </span>
      </div>

      <form method="post" class="flex flex-col items-center w-full" id="form">
        {% csrf_token %}
        <div class="flex flex-col gap-2.5 w-full">
          {% if error %}
          <p class="text-[#FF0000] font-[700] text-[12px] text-center pt-1.5">
            {{ error }}
          </p>
          {% endif %}
          <div class="w-full flex flex-col pt-1.5">
            {{ form.nom }}
          </div>

          <div class="w-full flex flex-col pt-1.5">
            {{ form.description }}
          </div>
        </div>
        <div class="w-1/2 h-[50px] my-2.5 flex justify-center items-center ml-auto">
          <button id="btn" class="bg-[#FF0000] w-full h-full text-white rounded-lg font-[500] text-[13px]">
            Terminer
          </button>
          <span class="loader" id="spinner"></span>
        </div>
      </form>
    </div>
  </section>
  <section class="mt-[50px]">
    <p class="text-[12px] text-[#343A40] text-justify">La création d'une organisation implique que vous aviez accepté les <span class="font-[600]">conditions d'utilisation</span> et reconnaissiez avoir lu la <span class="font-[600]">politique de confidentialité</span> de Event. Ceci porte des informations concernant la collecte de données.
    </p>
  </section>
</main>

<script>
  const form = document.getElementById('form');
  const spinner = document.getElementById('spinner');
  const btn = document.getElementById('btn');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    btn.style.display = 'none';
    spinner.style.display = 'block';
    form.submit();
  });

  window.addEventListener('pageshow', (event) => {
    // Vérifiez si la page est chargée depuis le cache
    if (event.persisted) {
      // Masquez le spinner
      spinner.style.display = 'none';
      // Affichez le bouton
      btn.style.display = 'block';
    }
  });
</script>
{% endblock %}